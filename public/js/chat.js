!function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.element=document.getElementById(e)}namePrompt(e){let t="";do{t=prompt("What's your username?")}while(""===t||null===t||void 0===t);e(t)}appendSimpleMessage(e){const t=document.createElement("strong"),n=document.createElement("span");t.appendChild(document.createTextNode(e.user)),n.appendChild(document.createTextNode(e.content)),this.appendMessage([t,n])}appendBoldText(e){const t=document.createElement("strong");t.appendChild(document.createTextNode(e.content)),this.appendMessage([t])}appendImage(e){const t=document.createElement("strong"),n=document.createElement("span"),o=document.createElement("img");o.classList.add("responsive-img"),o.src=e.content,t.appendChild(document.createTextNode(e.user)),n.appendChild(document.createTextNode(": ")),this.appendMessage([t,n,o])}refreshUserList(e){const t=document.getElementById("userList");t.innerHTML="",e.forEach(e=>{const n=document.createElement("div");n.classList.add("chip"),n.appendChild(document.createTextNode(e.name)),t.appendChild(n)})}scrollDown(){this.element.scrollTop=this.element.scrollHeight}appendMessage(e){let t=document.createElement("li");t.classList.add("collection-item"),e.forEach(e=>t.appendChild(e)),this.element.appendChild(t),this.scrollDown()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CONNECTION="connection",e.CLIENT_CONNECT="connect",e.DISCONNECT="disconnect",e.CONNECT_FAILED="connect_failed",e.NEW_USER="new-user",e.WELCOME="welcome",e.USER_CONNECT="user-connect",e.USER_DISCONNECT="user-disconnect",e.CONNECTED_USERS="connected-users",e.MESSAGE="message",e.IMAGE="image"}(t.SocketEvents||(t.SocketEvents={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(3);t.default=class{constructor(e){this.ui=e}init(){const e=io();this.registerSocketEvents(e),this.registerFormEvents(e)}registerSocketEvents(e){const t={content:"Connection Failed.",user:""},n={content:"You have been disconnected. Trying to reconnect.",user:""};e.on(o.SocketEvents.CLIENT_CONNECT,()=>this.ui.namePrompt(t=>e.emit(o.SocketEvents.NEW_USER,t))),e.on(o.SocketEvents.WELCOME,e=>this.ui.appendBoldText(e)),e.on(o.SocketEvents.DISCONNECT,()=>this.ui.appendBoldText(n)),e.on(o.SocketEvents.CONNECT_FAILED,()=>this.ui.appendBoldText(t)),e.on(o.SocketEvents.USER_CONNECT,e=>this.ui.appendSimpleMessage(e)),e.on(o.SocketEvents.USER_DISCONNECT,e=>this.ui.appendSimpleMessage(e)),e.on(o.SocketEvents.MESSAGE,e=>this.ui.appendSimpleMessage(e)),e.on(o.SocketEvents.IMAGE,e=>this.ui.appendImage(e)),e.on(o.SocketEvents.CONNECTED_USERS,e=>this.ui.refreshUserList(e))}registerFormEvents(e){const t=document.getElementById("chatForm");t.addEventListener("submit",n=>{const s=document.getElementById("newMessage").value;e.emit(o.SocketEvents.MESSAGE,s),t.reset(),n.preventDefault()}),document.getElementById("imageSubmit").addEventListener("change",t=>{const n=document.getElementById("image").files[0],s=new FileReader;s.addEventListener("load",t=>e.emit(o.SocketEvents.IMAGE,{img:s.result})),s.readAsDataURL(n),t.preventDefault()})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(4),s=n(2);document.addEventListener("DOMContentLoaded",e=>{$(".dropify").dropify();const t=new s.default("messages");new o.default(t).init()})}]);
//# sourceMappingURL=chat.js.map