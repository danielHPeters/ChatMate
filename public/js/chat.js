!function(e){var t={};function n(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(1),o=n(3);$(".dropify").dropify();const c=new o.default("messages");new s.default(c).init()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(2);t.default=class{constructor(e){this.ui=e}init(){const e=io();this.registerSocketEvents(e),this.registerFormEvents(e)}registerSocketEvents(e){const t={content:"Connection Failed.",user:""},n={content:"You have been disconnected. Trying to reconnect.",user:""};e.on(s.SocketEvents.CLIENT_CONNECT,()=>this.ui.namePrompt(t=>e.emit(s.SocketEvents.NEW_USER,t))),e.on(s.SocketEvents.WELCOME,e=>this.ui.appendBoldText(e)),e.on(s.SocketEvents.DISCONNECT,()=>this.ui.appendBoldText(n)),e.on(s.SocketEvents.CONNECT_FAILED,()=>this.ui.appendBoldText(t)),e.on(s.SocketEvents.USER_CONNECT,e=>this.ui.appendSimpleMessage(e)),e.on(s.SocketEvents.USER_DISCONNECT,e=>this.ui.appendSimpleMessage(e)),e.on(s.SocketEvents.MESSAGE,e=>this.ui.appendSimpleMessage(e)),e.on(s.SocketEvents.IMAGE,e=>this.ui.appendImage(e)),e.on(s.SocketEvents.CONNECTED_USERS,e=>this.ui.refreshUserList(e))}registerFormEvents(e){const t=document.getElementById("chatForm");t.addEventListener("submit",n=>{const o=document.getElementById("newMessage").value;e.emit(s.SocketEvents.MESSAGE,o),t.reset(),n.preventDefault()}),document.getElementById("imageSubmit").addEventListener("change",t=>{const n=document.getElementById("image").files[0],o=new FileReader;o.addEventListener("load",t=>e.emit(s.SocketEvents.IMAGE,{img:o.result})),o.readAsDataURL(n),t.preventDefault()})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CONNECTION="connection",e.CLIENT_CONNECT="connect",e.DISCONNECT="disconnect",e.CONNECT_FAILED="connect_failed",e.NEW_USER="new-user",e.WELCOME="welcome",e.USER_CONNECT="user-connect",e.USER_DISCONNECT="user-disconnect",e.CONNECTED_USERS="connected-users",e.MESSAGE="message",e.IMAGE="image"}(t.SocketEvents||(t.SocketEvents={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.element=document.getElementById(e)}namePrompt(e){let t="";do{t=prompt("What's your username?")}while(""===t||null==t);e(t)}appendSimpleMessage(e){const t=document.createElement("strong"),n=document.createElement("span");t.appendChild(document.createTextNode(e.user)),n.appendChild(document.createTextNode(e.content)),this.appendMessage([t,n])}appendBoldText(e){const t=document.createElement("strong");t.appendChild(document.createTextNode(e.content)),this.appendMessage([t])}appendImage(e){const t=document.createElement("strong"),n=document.createElement("span"),s=document.createElement("img");s.classList.add("responsive-img"),s.src=e.content,t.appendChild(document.createTextNode(e.user)),n.appendChild(document.createTextNode(": ")),this.appendMessage([t,n,s])}refreshUserList(e){const t=document.getElementById("userList");t.innerHTML="",e.forEach(e=>{const n=document.createElement("div");n.classList.add("chip"),n.appendChild(document.createTextNode(e.name)),t.appendChild(n)})}scrollDown(){this.element.scrollTop=this.element.scrollHeight}appendMessage(e){let t=document.createElement("li");t.classList.add("collection-item"),e.forEach(e=>t.appendChild(e)),this.element.appendChild(t),this.scrollDown()}}}]);
//# sourceMappingURL=chat.js.map